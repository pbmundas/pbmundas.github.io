<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kali Linux Terminal Emulator</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
            color: #ffffff;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            overflow: hidden;
        }
        
        #terminal {
            height: 100vh;
            width: 100vw;
            padding: 10px;
            box-sizing: border-box;
            overflow-y: auto;
            background-color: #000000;
        }
        
        #output {
            white-space: pre-wrap;
            line-height: 1.4;
            margin-bottom: 10px;
            color: #ffffff;
        }
        
        #input-line {
            display: flex;
            align-items: center;
            margin: 0;
        }
        
        #prompt {
            color: #ffffff;
            white-space: pre;
        }
        
        #command {
            background: transparent;
            border: none;
            color: #ffffff;
            font-family: inherit;
            font-size: inherit;
            outline: none;
            flex-grow: 1;
            caret-color: #ffffff;
        }
        
        #command::placeholder {
            color: #808080;
        }
        
        .error {
            color: #ff0000;
        }
        
        .success {
            color: #00ff00;
        }
        
        .info {
            color: #00ffff;
        }
        
        .link {
            color: #ff00ff;
            text-decoration: underline;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="terminal">
        <div id="output">
Welcome to Kali Linux Terminal Emulator!

Type 'help' for available commands.
        </div>
        <div id="input-line">
            <span id="prompt">user@kali:~$ </span>
            <input type="text" id="command" autofocus placeholder="Enter command...">
        </div>
    </div>

    <script>
        // Command registry: An object to hold all commands as functions
        const commands = {
            // Built-in basic commands
            'help': () => {
                return `Available commands:
  help     - Show this help message
  ls       - List directory contents
  pwd      - Print working directory
  whoami   - Display current user
  echo     - Print arguments
  clear    - Clear the terminal screen
  date     - Show current date
  exit     - Exit the terminal (reloads page)
  
Link commands:
  attack
  hunting
  playbooks
  blog     
  linkedin 
  whatsapp 
  website  
  mobile   
  
Add custom commands using addCommand('name', function(args) { return 'output'; });`;
            },
            'ls': (args) => {
                const dir = args[0] || '';
                if (dir === '-l') {
                    return `total 48
drwxr-xr-x  5 kali kali  4096 Sep 12 10:00 .
drwxr-xr-x  3 root root  4096 Sep 12 09:00 ..
-rw-r--r--  1 kali kali  2201 Jan  6  2024 .bash_logout
-rw-r--r--  1 kali kali  3771 Jan  6  2024 .bashrc
-rw-r--r--  1 kali kali   807 Jan  6  2024 .profile
drwxr-xr-x  2 kali kali  4096 Sep 12 10:00 Desktop
drwxr-xr-x  2 kali kali  4096 Sep 12 09:00 Documents
drwxr-xr-x  2 kali kali  4096 Sep 12 09:00 Downloads`;
                }
                return `Desktop/
Documents/
Downloads/
Music/
Pictures/
Templates/
Videos/`;
            },
            'pwd': () => '/home/kali',
            'whoami': () => 'kali',
            'echo': (args) => args.join(' '),
            'clear': () => {
                document.getElementById('output').innerHTML = '';
                return ''; // No output text
            },
            'date': () => new Date().toString(),
            'exit': () => {
                if (confirm('Exit terminal? This will reload the page.')) {
                    location.reload();
                }
                return ''; // No output if not exiting
            },
            // Link-based commands (automatically open in new tab; replace URLs with your actual links)
            'attacks': () => {
                window.open('https://pbmundas.github.io/know-attacks-history/', '_blank');
                return `Opening Attack Navigator in new tab...`;
            },
            'hunting': () => {
                window.open('https://github.com/pbmundas/Threat-Hunting/', '_blank');
                return `Opening Attack Navigator in new tab...`;
            },
            'playbooks': () => {
                window.open('https://github.com/pbmundas/SOC-Investigation-Playbooks-for-Mitre-Techniques', '_blank');
                return `Opening Attack Navigator in new tab...`;
            },
            'blog': () => {
                window.open('https://readsecurity.wordpress.com', '_blank');
                return `Opening blog in new tab...`;
            },
            'linkedin': () => {
                window.open('https://www.linkedin.com/in/prasannamundas/', '_blank');
                return `Opening LinkedIn profile in new tab...`;
            },
            'whatsapp': () => {
                window.open('https://api.whatsapp.com/send/?phone=919886120777&text=Hello%20Prasanna&type=phone_number&app_absent=0', '_blank');
                return `Opening WhatsApp Web in new tab...`;
            },
            'website': () => {
                window.open('https://pbmundas.github.io', '_blank');
                return `Opening personal website in new tab...`;
            },
            'mobile': () => {
                return `Contact: +1-9886120777 (Click to call via tel: link if on mobile)
<a href="tel:+919886120777" class="link">Click here to call</a>`;
            }
        };

        // Function to add custom commands from HTML/JS code
        // Usage: addCommand('mycommand', (args) => { return 'Custom output: ' + args.join(' '); });
        function addCommand(name, func) {
            if (typeof func !== 'function') {
                throw new Error('Custom command must be a function that takes args array and returns output string.');
            }
            commands[name] = func;
            appendToOutput(`Custom command '${name}' added successfully.`, 'success');
        }

        // Example custom command (uncomment or modify as needed for portfolio demo)
        // addCommand('hello', (args) => `Hello, ${args[0] || 'World'}! This is a custom command.`);

        // Helper function to append output to terminal
        function appendToOutput(text, className = '') {
            const output = document.getElementById('output');
            const line = document.createElement('div');
            line.className = className;
            line.innerHTML = text; // Use innerHTML to support links
            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
        }

        // Input handling
        const commandInput = document.getElementById('command');
        commandInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const cmdLine = this.value.trim();
                if (cmdLine) {
                    // Append command to output
                    appendToOutput(`user@kali:~$ ${cmdLine}`);

                    // Parse command
                    const parts = cmdLine.split(/\s+/);
                    const cmd = parts[0].toLowerCase();
                    const args = parts.slice(1);

                    let output = '';
                    let outputClass = '';

                    if (commands[cmd]) {
                        try {
                            output = commands[cmd](args);
                            if (output !== undefined && output !== null && output !== '') {
                                appendToOutput(output, outputClass);
                            }
                        } catch (err) {
                            appendToOutput(`Error executing '${cmd}': ${err.message}`, 'error');
                        }
                    } else {
                        appendToOutput(`bash: ${cmd}: command not found`, 'error');
                    }

                    // Clear input
                    this.value = '';
                }
            } else if (e.key === 'Tab') {
                e.preventDefault();
                // Simple tab completion (basic: suggest 'ls' or 'help' if empty)
                if (this.value.trim() === '') {
                    this.value = 'ls ';
                }
            }
        });

        // Focus input on any click in the terminal
        document.addEventListener('click', function(e) {
            commandInput.focus();
        });

        // Auto-focus on input initially
        commandInput.focus();

        // Handle window resize to keep terminal full-screen
        window.addEventListener('resize', () => {
            document.getElementById('terminal').style.height = '100vh';
        });
    </script>
</body>
</html>
